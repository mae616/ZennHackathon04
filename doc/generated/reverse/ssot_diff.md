# SSOT差分提案

## このドキュメントについて

コード解析の結果、SSOT（`doc/input/rdd.md`, `doc/input/architecture.md`）との差分を検出した場合に記録します。

**更新日時**: 2026-02-02

---

## 検出された差分

### 1. Next.jsバージョン表記の不整合

| 項目 | SSOT (rdd.md) | CLAUDE.md | 実際 |
|------|--------------|-----------|------|
| Next.js | 15 | 16 | 15 |

**提案**: CLAUDE.md の「Next.js 16」を「Next.js 15」に修正済み

**ステータス**: ✅ 解決済み（2026-02-02）

---

### 2. Content Script マッチパターンの不整合

| 項目 | CLAUDE.md (旧) | 実際のコード |
|------|---------------|-------------|
| Gemini | `*://*.google.com/*` | `*://gemini.google.com/*` |

**提案**: CLAUDE.md のマッチパターンを実際のコードに合わせて修正済み

**ステータス**: ✅ 解決済み（2026-02-02）

---

## 今後の検討事項

### A. 認証機能の追加（RDD記載）

- **RDD記載**: 「Firebase Auth想定（後日）」
- **現状**: 認証未実装（MVP段階）
- **提案**: Sprint 2以降で Firebase Auth を追加

### B. テスト戦略の実装（RDD記載）

- **RDD記載**: 「テスト戦略: Vitest（後日追加）」
- **現状**: テストファイルなし
- **提案**: Sprint 2以降で Vitest を導入

### C. 観測性の実装（RDD記載）

- **RDD記載**: 「観測性: Cloud Logging（後日）」
- **現状**: `console.log` / `console.error` のみ
- **提案**: Cloud Run デプロイ時に Cloud Logging を統合

---

## 変更要求が必要な場合のテンプレート

```
Change Request: {タイトル}
- RDD参照: doc/input/rdd.md §{該当セクション}
- 現状の制約: {なぜRDD準拠だと難しいか}
- 提案差分: {スタック/設計の変更内容（最小）}
- 影響: {テスト/運用/セキュリティ/コスト}
- 代替案: {検討したが採用しない案}
- 戻し方: {ロールバック手順}
- 推奨: 承認/却下の判断材料
```

---

## 更新履歴

| 日付 | 内容 |
|------|------|
| 2026-02-02 | 初回作成、Next.jsバージョン・マッチパターン不整合を解決 |
